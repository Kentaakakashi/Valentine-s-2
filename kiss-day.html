<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>kiss Â· voice</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #0a0005;
      color: #ffeaf2;
      font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
      overflow-x: hidden;
      line-height: 1.5;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* noise overlay */
    .noise {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIj48ZmlsdGVyIGlkPSJmIj48ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iLjc0IiBudW1PY3RhdmVzPSIzIiAvPjwvZmlsdGVyPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbHRlcj0idXJsKCNmKSIgb3BhY2l0eT0iMC4wNCIgLz48L3N2Zz4=');
      pointer-events: none;
      z-index: 2000;
      opacity: 0.25;
      mix-blend-mode: overlay;
    }

    /* sections */
    .section {
      min-height: 100vh;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem 1.5rem;
      position: relative;
      transition: opacity 0.8s ease;
    }

    .hidden {
      display: none !important;
    }

    /* â€”â€”â€”â€”â€” INTRO â€”â€”â€”â€”â€” */
    #intro {
      background: radial-gradient(circle at 70% 20%, #2b0018 0%, #020001 90%);
      text-align: center;
    }

    .intro-content {
      max-width: 800px;
      filter: drop-shadow(0 0 60px #ff004c);
      animation: breath 8s infinite alternate;
    }

    @keyframes breath {
      0% { transform: scale(1); filter: drop-shadow(0 0 30px #ff3366); }
      100% { transform: scale(1.02); filter: drop-shadow(0 0 70px #ff0066); }
    }

    .intro-title {
      font-size: clamp(2.5rem, 14vw, 6rem);
      font-weight: 300;
      letter-spacing: 12px;
      text-transform: uppercase;
      margin-bottom: 1.5rem;
      animation: glitch 4s infinite;
      text-shadow: 0 0 15px #ff4d8c, 0 0 60px #b3002d;
    }

    @keyframes glitch {
      0%, 100% { transform: skew(0deg, 0deg); opacity: 1; }
      95% { transform: skew(8deg, 2deg); opacity: 0.8; text-shadow: 6px 0 #ff00aa, -6px 0 #00e0ff; }
      96% { transform: skew(-6deg, -1deg); }
    }

    .intro-sub {
      font-size: 1.5rem;
      font-weight: 200;
      margin-bottom: 3rem;
      backdrop-filter: blur(2px);
      color: #ffc0cb;
    }

    .enter-btn {
      background: rgba(30, 0, 10, 0.5);
      border: 2px solid #ff3d6c;
      color: #ffb0c3;
      font-size: 2rem;
      padding: 1rem 4rem;
      border-radius: 80px;
      backdrop-filter: blur(15px);
      cursor: pointer;
      transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      box-shadow: 0 0 50px #ff1455;
      letter-spacing: 6px;
      font-weight: 200;
    }

    .enter-btn:hover {
      background: #ff2a5e;
      color: #fff;
      box-shadow: 0 0 100px #ff2a5e;
      transform: scale(1.1);
      border-color: #ffd0dc;
    }

    /* â€”â€”â€”â€”â€” MAIN VOICE SECTION â€”â€”â€”â€”â€” */
    #voiceSection {
      background: #0b0006;
      background: radial-gradient(circle at 30% 50%, #1f0012, #020001);
      position: relative;
    }

    .voice-container {
      background: rgba(20, 0, 10, 0.6);
      backdrop-filter: blur(25px);
      -webkit-backdrop-filter: blur(25px);
      border-radius: 70px 70px 40px 40px;
      padding: 3rem 3rem 4rem;
      border: 1px solid #a02b50;
      box-shadow: 0 50px 100px #200008, 0 0 0 2px #ff336622 inset,
                  0 0 80px #ff004c;
      max-width: 750px;
      width: 100%;
      position: relative;
      z-index: 10;
      animation: glowPulse 6s infinite alternate;
    }

    @keyframes glowPulse {
      0% { box-shadow: 0 50px 100px #200008, 0 0 0 2px #ff336622 inset, 0 0 60px #ff004c; }
      100% { box-shadow: 0 50px 120px #300010, 0 0 0 4px #ff7799 inset, 0 0 120px #ff0066; }
    }

    .voice-container h2 {
      font-size: 3.5rem;
      font-weight: 200;
      letter-spacing: 14px;
      color: #ffb0cc;
      text-shadow: 0 0 30px #ff99bb;
      margin-bottom: 0.5rem;
    }

    .voice-container p {
      font-size: 1.6rem;
      color: #ffc0cb;
      margin-bottom: 2.5rem;
      font-style: italic;
      opacity: 0.9;
    }

    /* custom player */
    .custom-player {
      background: #230012;
      border-radius: 160px 160px 60px 60px;
      padding: 2rem 2.5rem;
      margin-bottom: 2rem;
      border: 1px solid #ff4d6e;
      box-shadow: 0 20px 30px #00000077, 0 0 40px #ff1a4c inset;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .player-controls {
      display: flex;
      align-items: center;
      gap: 1.5rem;
      flex-wrap: wrap;
    }

    .play-pause {
      background: #ff2a5e;
      border: none;
      color: white;
      width: 80px;
      height: 80px;
      border-radius: 50%;
      font-size: 2.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: 0.2s;
      box-shadow: 0 0 50px #ff0066;
      line-height: 1;
    }

    .play-pause:hover {
      transform: scale(1.15);
      background: #ff477b;
    }

    .time-container {
      display: flex;
      align-items: center;
      gap: 1rem;
      color: #ffb6c1;
      font-size: 1.4rem;
      letter-spacing: 2px;
      font-weight: 200;
      flex: 1;
    }

    .time-bar {
      flex: 1;
      height: 8px;
      background: #3d0022;
      border-radius: 10px;
      position: relative;
      cursor: pointer;
      min-width: 200px;
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #ff99bb, #ff3355);
      border-radius: 10px;
      box-shadow: 0 0 20px #ff4d6d;
    }

    .time-display {
      font-family: monospace;
      background: #00000055;
      padding: 0.4rem 1.2rem;
      border-radius: 40px;
      border: 1px solid #ff7799;
      font-size: 1.4rem;
    }

    .volume-slider {
      display: flex;
      align-items: center;
      gap: 1rem;
      color: #ff99bb;
      margin-left: auto;
    }

    .volume-slider input {
      width: 120px;
      accent-color: #ff2a5e;
      background: #1e000b;
    }

    .choice-buttons {
      display: flex;
      gap: 2.5rem;
      justify-content: center;
      margin: 2rem 0 0.5rem;
      transition: all 0.3s;
    }

    .choice-btn {
      background: transparent;
      border: 2px solid #ff4d88;
      color: #ffc0d5;
      font-size: 2.8rem;
      padding: 1rem 4rem;
      border-radius: 100px;
      cursor: pointer;
      transition: 0.3s;
      min-width: 200px;
      backdrop-filter: blur(15px);
      font-weight: 200;
      letter-spacing: 8px;
      box-shadow: 0 0 30px #ff3366;
    }

    .choice-btn:hover {
      background: #ff1f5a;
      color: #fff;
      border-color: #ffb3c6;
      transform: scale(1.1);
      box-shadow: 0 0 80px #ff3b6f;
    }

    .locked {
      opacity: 0.2;
      pointer-events: none;
      filter: grayscale(1);
    }

    /* floating message */
    .floating-message {
      font-size: 4.5rem;
      font-weight: 200;
      color: #ffc0cb;
      text-shadow: 0 0 50px #ff1a4c, 0 0 150px #ff80b3;
      animation: floatMessage 5s infinite alternate ease-in-out;
      text-align: center;
      margin-top: 3rem;
      letter-spacing: 8px;
      background: rgba(0,0,0,0.3);
      backdrop-filter: blur(10px);
      padding: 2rem 4rem;
      border-radius: 120px;
      border: 2px solid #ff99bb55;
    }

    @keyframes floatMessage {
      0% { transform: translateY(0) scale(1); opacity: 0.8; }
      100% { transform: translateY(-50px) scale(1.05); opacity: 1; text-shadow: 0 0 80px #ff80b3; }
    }

    /* floating hearts */
    .floating-hearts {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 100;
    }

    .heart {
      position: absolute;
      font-size: 2rem;
      opacity: 0.3;
      color: #ff4d8c;
      animation: rise 14s infinite linear;
      user-select: none;
    }

    @keyframes rise {
      0% { transform: translateY(110vh) rotate(0deg); opacity: 0; }
      20% { opacity: 0.6; }
      100% { transform: translateY(-20vh) rotate(360deg); opacity: 0; }
    }

    /* small effects */
    .glow-text {
      text-shadow: 0 0 20px currentColor;
    }

    @media (max-width: 700px) {
      .voice-container { padding: 2rem; }
      .choice-btn { font-size: 2rem; padding: 0.8rem 2rem; min-width: 140px; }
      .player-controls { flex-direction: column; align-items: stretch; }
      .volume-slider { margin-left: 0; }
      .floating-message { font-size: 2.8rem; }
    }
  </style>
</head>
<body>
  <div class="noise"></div>
  <div class="floating-hearts" id="heartContainer"></div>

  <!-- INTRO -->
  <section id="intro" class="section">
    <div class="intro-content">
      <h1 class="intro-title">kiss me like you'll never forget</h1>
      <p class="intro-sub">some kisses are play. some are ember. someâ€¦ never leave.</p>
      <button class="enter-btn" onclick="startVoice()">listen</button>
    </div>
  </section>

  <!-- VOICE SECTION -->
  <section id="voiceSection" class="section hidden">
    <div class="voice-container">
      <h2>âœ¦ deeper âœ¦</h2>
      <p>my voice Â· your choice</p>

      <!-- custom player -->
      <div class="custom-player" id="customPlayer">
        <div class="player-controls">
          <button class="play-pause" id="playPauseBtn">â–¶</button>
          <div class="time-container">
            <span class="time-display" id="currentTime">0:00</span>
            <div class="time-bar" id="timeBar">
              <div class="progress-fill" id="progressFill"></div>
            </div>
            <span class="time-display" id="durationTime">0:00</span>
          </div>
          <div class="volume-slider">
            <span>ðŸ”Š</span>
            <input type="range" id="volumeControl" min="0" max="1" step="0.05" value="0.8">
          </div>
        </div>
      </div>

      <!-- choice buttons -->
      <div class="choice-buttons hidden" id="choices">
        <button class="choice-btn" onclick="choose('yes')">yes</button>
        <button class="choice-btn" onclick="choose('no')">no</button>
      </div>

      <!-- floating message (hidden initially) -->
      <div id="floatingMessage" class="floating-message hidden">happy kiss day my bujji</div>
    </div>
  </section>

  <script>
    (function() {
      // --- ambient hearts ---
      const heartContainer = document.getElementById('heartContainer');
      if (heartContainer) {
        for (let i = 0; i < 30; i++) {
          let heart = document.createElement('div');
          heart.className = 'heart';
          heart.innerHTML = ['â¤ï¸', 'â¤ï¸â€ðŸ”¥', 'ðŸ’‹', 'ðŸ’•'][i % 4];
          heart.style.left = Math.random() * 100 + '%';
          heart.style.animationDelay = Math.random() * 12 + 's';
          heart.style.fontSize = (1.2 + Math.random() * 2) + 'rem';
          heart.style.opacity = 0.2 + Math.random() * 0.4;
          heartContainer.appendChild(heart);
        }
      }

      // --- DOM elements ---
      const introSec = document.getElementById('intro');
      const voiceSec = document.getElementById('voiceSection');
      const choicesDiv = document.getElementById('choices');
      const customPlayerDiv = document.getElementById('customPlayer');
      const floatingMessageDiv = document.getElementById('floatingMessage');
      const playPauseBtn = document.getElementById('playPauseBtn');
      const currentTimeSpan = document.getElementById('currentTime');
      const durationTimeSpan = document.getElementById('durationTime');
      const timeBar = document.getElementById('timeBar');
      const progressFill = document.getElementById('progressFill');
      const volumeControl = document.getElementById('volumeControl');

      // audio element
      const audio = new Audio();
      audio.src = "audio1.mp3";  // initial voice note

      let stage = 0;          // 0 = after audio1, 1 = after first yes
      let finalLock = false;  // if true, no more choices

      // --- helper: show subtle toast for missing files (optional) ---
      function showToast(msg) {
        const toast = document.createElement('div');
        toast.textContent = msg;
        toast.style.position = 'fixed';
        toast.style.bottom = '30px';
        toast.style.left = '50%';
        toast.style.transform = 'translateX(-50%)';
        toast.style.background = '#ff3366';
        toast.style.color = 'white';
        toast.style.padding = '12px 30px';
        toast.style.borderRadius = '60px';
        toast.style.zIndex = '10000';
        toast.style.fontSize = '1.4rem';
        toast.style.boxShadow = '0 0 40px #ff0066';
        toast.style.backdropFilter = 'blur(10px)';
        toast.style.border = '1px solid #ff99bb';
        document.body.appendChild(toast);
        setTimeout(() => toast.remove(), 3000);
      }

      function safePlay(audioObj, fallbackMsg) {
        audioObj.play().catch(err => {
          console.warn('Audio play failed:', err);
          showToast(fallbackMsg || 'audio file not found');
        });
      }

      // --- custom player logic ---
      function formatTime(seconds) {
        if (isNaN(seconds)) return '0:00';
        const m = Math.floor(seconds / 60);
        const s = Math.floor(seconds % 60).toString().padStart(2, '0');
        return `${m}:${s}`;
      }

      function updatePlayerUI() {
        currentTimeSpan.textContent = formatTime(audio.currentTime);
        durationTimeSpan.textContent = formatTime(audio.duration);
        const percent = (audio.currentTime / (audio.duration || 1)) * 100;
        progressFill.style.width = percent + '%';
      }

      audio.addEventListener('loadedmetadata', () => {
        durationTimeSpan.textContent = formatTime(audio.duration);
      });

      audio.addEventListener('timeupdate', updatePlayerUI);

      audio.addEventListener('ended', () => {
        playPauseBtn.textContent = 'â–¶';
        if (!finalLock && !customPlayerDiv.classList.contains('hidden')) {
          choicesDiv.classList.remove('hidden');
        }
      });

      playPauseBtn.addEventListener('click', () => {
        if (audio.paused) {
          safePlay(audio, 'audio file missing');
          playPauseBtn.textContent = 'â¸';
        } else {
          audio.pause();
          playPauseBtn.textContent = 'â–¶';
        }
      });

      timeBar.addEventListener('click', (e) => {
        const rect = timeBar.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        const width = rect.width;
        const percentage = clickX / width;
        if (audio.duration) {
          audio.currentTime = percentage * audio.duration;
        }
      });

      volumeControl.addEventListener('input', (e) => {
        audio.volume = e.target.value;
      });

      // --- branching choices ---
      window.choose = function(answer) {
        if (finalLock) return;

        choicesDiv.classList.add('hidden');  // hide buttons

        if (stage === 0) {
          if (answer === 'no') {
            // first no: play no1.mp3 and lock
            audio.src = "no1.mp3";
            finalLock = true;
            audio.load();
            safePlay(audio, 'no1.mp3 missing');
            playPauseBtn.textContent = 'â¸';
          } else { // yes
            audio.src = "yes1.mp3";
            stage = 1;
            audio.load();
            safePlay(audio, 'yes1.mp3 missing');
            playPauseBtn.textContent = 'â¸';
          }
        } else if (stage === 1) {
          if (answer === 'yes') {
            // second yes: play yes2.mp3 and lock
            audio.src = "yes2.mp3";
            finalLock = true;
            audio.load();
            safePlay(audio, 'yes2.mp3 missing');
            playPauseBtn.textContent = 'â¸';
          } else { // no
            // second no: hide player, show floating message
            customPlayerDiv.classList.add('hidden');
            floatingMessageDiv.classList.remove('hidden');
            finalLock = true;
            audio.pause();
            playPauseBtn.textContent = 'â–¶';
          }
        }
      };

      // --- start voice section ---
      window.startVoice = function() {
        introSec.classList.add('hidden');
        voiceSec.classList.remove('hidden');
        // optionally start playing automatically?
        // we'll let user press play
      };

      // --- extra visual flair: heart burst on choice clicks ---
      document.querySelectorAll('.choice-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          for (let i = 0; i < 6; i++) {
            let h = document.createElement('span');
            h.innerHTML = 'â¤ï¸';
            h.style.position = 'fixed';
            h.style.left = (e.clientX + (Math.random() - 0.5) * 100) + 'px';
            h.style.top = (e.clientY + (Math.random() - 0.5) * 100) + 'px';
            h.style.fontSize = '2.5rem';
            h.style.pointerEvents = 'none';
            h.style.zIndex = '10000';
            h.style.animation = 'rise 1.5s forwards';
            h.style.filter = 'drop-shadow(0 0 10px #ff0066)';
            document.body.appendChild(h);
            setTimeout(() => h.remove(), 1500);
          }
        });
      });
    })();
  </script>
</body>
</html>
