<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5" />
  <title>ğŸ«‚  HUG TIME Â· infinite embrace</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at 20% 40%, #fff1f5, #ffe4ec, #ffe2ea, #ffede3);
      font-family: 'Quicksand', sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #3e2b36;
      position: relative;
      overflow-x: hidden;
      padding: 20px 10px;
      animation: bgLove 18s infinite alternate;
    }

    @keyframes bgLove {
      0% { background: radial-gradient(circle at 20% 40%, #ffe9f2, #ffdeec, #ffe2ed, #fff5ea); }
      50% { background: radial-gradient(circle at 80% 70%, #fff0fb, #ffe3ef, #ffdae9, #ffe8df); }
      100% { background: radial-gradient(circle at 40% 80%, #ffeef5, #ffd7e6, #ffe6ed, #fff1e5); }
    }

    /* floating hug particles â€” only hug related */
    .float-hug {
      position: fixed;
      pointer-events: none;
      color: #ff9aad;
      font-size: 2rem;
      opacity: 0.35;
      animation: hugFloat 22s infinite linear;
      z-index: 1;
      text-shadow: 0 0 20px #ffb8c9;
    }

    @keyframes hugFloat {
      0% { transform: translateY(120vh) rotate(0deg) scale(0.5); opacity: 0.1; }
      50% { opacity: 0.5; transform: translateY(40vh) rotate(180deg) scale(1.2); }
      100% { transform: translateY(-20vh) rotate(360deg) scale(0.3); opacity: 0; }
    }

    .glass-panel {
      position: relative;
      z-index: 20;
      max-width: 620px;
      width: 100%;
      background: rgba(255, 250, 250, 0.6);
      backdrop-filter: blur(24px);
      -webkit-backdrop-filter: blur(24px);
      border-radius: 90px 90px 90px 90px;
      padding: 36px 28px;
      box-shadow: 0 30px 60px rgba(250, 120, 150, 0.25),
                  inset 0 5px 15px rgba(255, 255, 255, 1),
                  inset 0 -8px 15px rgba(255, 180, 190, 0.4);
      border: 4px solid rgba(255, 255, 255, 0.8);
      animation: panelGlow 5s infinite alternate;
    }

    @keyframes panelGlow {
      0% { box-shadow: 0 30px 60px rgba(250, 120, 150, 0.2), inset 0 5px 15px white; }
      100% { box-shadow: 0 45px 80px rgba(255, 100, 140, 0.35), inset 0 8px 22px rgba(255, 255, 255, 1); }
    }

    h1 {
      font-size: 3.2rem;
      font-weight: 800;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 14px;
      letter-spacing: 4px;
      color: #562b3a;
      text-shadow: 0 8px 0 #ffc0cb, 0 14px 25px rgba(255, 110, 140, 0.4);
      animation: hugTitle 2s infinite alternate;
    }

    @keyframes hugTitle {
      0% { transform: scale(1) translateY(0); }
      100% { transform: scale(1.06) translateY(-8px); text-shadow: 0 10px 0 #ffb3c1, 0 22px 35px #ff95a8; }
    }

    .subhead {
      background: #ffe8f0e6;
      padding: 18px 22px;
      border-radius: 120px;
      border: 3px dashed #ff7e97;
      margin: 20px 0 20px;
      font-weight: 700;
      font-size: 1.1rem;
      color: #4f2e3a;
      backdrop-filter: blur(6px);
      animation: subPulse 3.5s infinite;
    }

    @keyframes subPulse {
      0% { border-color: #ff7e97; background: #ffe8f0e6; }
      50% { border-color: #ffb0c0; background: #fff0f5e6; }
    }

    /* mood panel */
    .mood-wrap {
      background: rgba(255, 235, 242, 0.7);
      border-radius: 80px 80px 50px 50px;
      padding: 22px 16px;
      margin-bottom: 18px;
      border: 3px solid #ffffffd0;
    }

    .pill-brigade {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
      margin-top: 10px;
    }

    .pill {
      background: rgba(255, 255, 255, 0.9);
      border: 3px solid white;
      padding: 12px 22px;
      border-radius: 60px;
      font-weight: 700;
      font-size: 0.95rem;
      color: #452830;
      box-shadow: 0 7px 0 #db99a4;
      transition: 0.12s cubic-bezier(0.34, 1.56, 0.64, 1);
      cursor: pointer;
      backdrop-filter: blur(2px);
    }

    .pill:hover {
      transform: scale(1.1) translateY(-6px);
      box-shadow: 0 13px 0 #c47f8b;
      background: #fff9fb;
    }

    .pill.active {
      background: #ffdbe5;
      border: 4px solid #ff5f7c;
      box-shadow: 0 8px 0 #ff4d6a;
    }

    /* HUG THRONE â€” main event */
    .hug-throne {
      position: relative;
      margin: 20px 0 30px;
    }

    .hug-button {
      width: 220px;
      height: 220px;
      border-radius: 55% 45% 60% 40% / 40% 55% 45% 60%;
      background: radial-gradient(circle at 30% 30%, #ffc1cc, #ffadbc, #ff97aa);
      border: 7px solid white;
      box-shadow: 0 22px 0 #9e6972, 0 35px 60px rgba(255, 80, 120, 0.5), inset 0 -15px 20px rgba(0,0,0,0.04), inset 0 15px 30px rgba(255,255,255,0.9);
      font-size: 1.7rem;
      font-weight: 800;
      color: #3c1e28;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 0 auto;
      cursor: pointer;
      transition: 0.04s;
      animation: hugMorph 5s infinite alternate, cloudLevitate 4s infinite;
      line-height: 1.3;
      padding: 0 15px;
    }

    @keyframes hugMorph {
      0% { border-radius: 55% 45% 60% 40% / 40% 55% 45% 60%; }
      25% { border-radius: 45% 55% 50% 50% / 55% 45% 55% 45%; }
      50% { border-radius: 60% 40% 55% 45% / 50% 60% 40% 50%; }
      100% { border-radius: 50% 50% 45% 55% / 50% 50% 50% 50%; }
    }

    @keyframes cloudLevitate {
      0% { transform: translateY(0) scale(1); }
      100% { transform: translateY(-18px) scale(1.03); }
    }

    .hug-glow {
      animation: hugSupernova 1.2s infinite !important;
      box-shadow: 0 0 0 25px rgba(255, 180, 200, 0.5), 0 0 0 50px rgba(255, 150, 170, 0.2), 0 22px 0 #9e6972 !important;
    }

    @keyframes hugSupernova {
      0% { box-shadow: 0 0 0 0 rgba(255, 150, 180, 0.6), 0 0 0 0 rgba(255, 130, 150, 0.3), 0 22px 0 #9e6972; }
      70% { box-shadow: 0 0 0 35px rgba(255, 180, 200, 0.2), 0 0 0 70px rgba(255, 150, 170, 0.05), 0 22px 0 #9e6972; }
    }

    /* HUG TIMER â€” brand new â¤ï¸ */
    .timer-kingdom {
      background: #ffe5ecf0;
      padding: 22px 16px;
      border-radius: 70px 70px 70px 20px;
      margin: 12px 0 25px;
      border: 4px solid white;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .timer-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .hug-stopwatch {
      font-size: 2rem;
      font-weight: 900;
      background: white;
      padding: 10px 24px;
      border-radius: 70px;
      border: 4px solid #ffb6c1;
      color: #732c3b;
      box-shadow: 0 6px 0 #c28691;
      letter-spacing: 3px;
    }

    .milestone-badge {
      background: #ffd9e2;
      border-radius: 50px;
      padding: 12px 22px;
      font-weight: 800;
      border: 3px solid white;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    /* hug stats area */
    .stat-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 18px;
      justify-content: space-between;
      margin: 20px 0 5px;
    }

    .stat-card {
      background: rgba(255, 245, 240, 0.9);
      padding: 15px 18px;
      border-radius: 50px;
      border: 4px solid white;
      box-shadow: 0 6px 0 #cc9ea6;
      flex: 1 1 140px;
      font-weight: 700;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .stat-number {
      font-size: 2.2rem;
      font-weight: 900;
      color: #8f4a55;
      text-shadow: 0 3px 0 #ffe2e7;
    }

    /* hug calendar streak */
    .streak-area {
      background: rgba(255, 225, 235, 0.8);
      border-radius: 50px;
      padding: 18px 22px;
      margin: 15px 0 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border: 3px solid white;
    }

    .streak-fire {
      font-size: 2.2rem;
      animation: fireFlick 1.2s infinite alternate;
    }

    @keyframes fireFlick {
      0% { transform: scale(1); text-shadow: 0 0 8px #ff7e5f; }
      100% { transform: scale(1.2); text-shadow: 0 0 20px #ff5f4a; }
    }

    .calendar-dots {
      display: flex;
      gap: 14px;
      font-size: 2rem;
    }

    /* message area â€” plus hug timer feedback */
    .message-bay {
      background: #fff0f4;
      border-radius: 70px 70px 70px 20px;
      padding: 22px 25px;
      border: 5px solid white;
      box-shadow: 0 12px 0 #e7a1ab, inset 0 3px 15px white;
      font-size: 1.25rem;
      font-weight: 700;
      color: #3f2630;
      min-height: 105px;
      margin: 15px 0 15px;
      opacity: 0;
      transform: scale(0.9);
      transition: opacity 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .message-bay.show {
      opacity: 1;
      transform: scale(1);
    }

    /* hug coupons + hug streak rewards */
    .coupon-factory {
      display: flex;
      gap: 12px;
      margin-top: 18px;
      flex-wrap: wrap;
    }

    .hug-perk {
      background: #ffe2e9;
      border: 3px dashed #ff7c94;
      border-radius: 40px;
      padding: 12px 20px;
      font-weight: 800;
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      transition: 0.15s;
    }

    .hug-perk:hover {
      background: #ffeef2;
      transform: scale(1.02) translateY(-4px);
      border: 3px solid #ff98ab;
    }

    /* extra cuddle features */
    .cuddle-tools {
      display: flex;
      flex-wrap: wrap;
      margin-top: 22px;
      gap: 12px;
    }

    .cuddle-btn {
      background: white;
      border: 4px solid #ffbcc9;
      padding: 12px 20px;
      border-radius: 50px;
      font-weight: 800;
      color: #532c36;
      box-shadow: 0 6px 0 #b8848e;
      transition: 0.07s;
      cursor: pointer;
      flex: 1 0 130px;
    }

    .cuddle-btn:active {
      transform: translateY(8px);
      box-shadow: 0 1px 0 #b8848e;
    }

    /* reset not included â€” only love */
  </style>
</head>
<body>

<div id="floatingHugsContainer"></div>
<div class="glass-panel">

  <h1>ğŸ«‚  HUG TIME  ğŸ«‚</h1>
  <div class="subhead">ğŸŒ¸  hold to hug â€” time melts away  ğŸŒ¸</div>

  <!-- MOOD SECTION -->
  <div class="mood-wrap">
    <div style="font-weight:800; margin-bottom:14px; font-size:1.2rem;">ğŸ’— how are you? ğŸ’—</div>
    <div class="pill-brigade" id="moodPanel">
      <button data-mood="low" class="pill">ğŸŒ§ï¸ low</button>
      <button data-mood="meh" class="pill">ğŸƒ meh</button>
      <button data-mood="okay" class="pill active">â˜ï¸ okay</button>
      <button data-mood="emotional" class="pill">ğŸ¥¹ emotional</button>
      <button data-mood="loved" class="pill">ğŸ’˜ loved</button>
      <button data-mood="anxious" class="pill">ğŸŒ€ anxious</button>
      <button data-mood="cozy" class="pill">ğŸ§¸ cozy</button>
    </div>
  </div>

  <!-- HUG BUTTON â€” PRESS AND HOLD TO ACCUMULATE TIME -->
  <div class="hug-throne">
    <button class="hug-button" id="hugBtn">
      <span style="font-size:2.5rem;">ğŸ«‚</span> hold me
    </button>
  </div>

  <!-- HUG TIMER â€” TOTAL HUG DURATION (LIFETIME) -->
  <div class="timer-kingdom">
    <div class="timer-header">
      <span style="font-size:1.5rem; font-weight:800;">â±ï¸ total hug time</span>
      <span class="hug-stopwatch" id="totalHugTimeDisplay">0s</span>
    </div>
    <div style="display:flex; justify-content:space-between; align-items:center;">
      <span style="font-weight:800;">this hug:</span>
      <span style="background:white; border-radius:60px; padding:10px 26px; font-size:1.8rem; font-weight:900; border:4px solid #ffa5b6;" id="currentHugDuration">0.0s</span>
    </div>
  </div>

  <!-- STATS: HUG COUNT + STREAK + MILESTONE -->
  <div class="stat-grid">
    <div class="stat-card">
      <span style="font-size:1.9rem;">ğŸ«‚</span>
      <span class="stat-number" id="hugCounter">0</span>
      <span>total hugs</span>
    </div>
    <div class="stat-card">
      <span style="font-size:1.9rem;">ğŸ”¥</span>
      <span class="stat-number" id="streakNumber">0</span>
      <span>day streak</span>
    </div>
    <div class="stat-card" id="milestoneCard">
      <span style="font-size:1.9rem;">ğŸ†</span>
      <span class="stat-number" id="milestoneValue">0</span>
      <span id="milestoneLabel">hug minutes</span>
    </div>
  </div>

  <!-- WEEKLY HUG CALENDAR -->
  <div class="streak-area">
    <span class="streak-fire">ğŸ”¥</span>
    <span style="font-weight:900;">hug week</span>
    <div class="calendar-dots" id="weekDots">ğŸ¤ ğŸ¤ ğŸ¤ ğŸ¤ ğŸ¤ ğŸ¤ ğŸ¤</div>
  </div>

  <!-- MESSAGE BOX (HUG RESPONSE) -->
  <div class="message-bay" id="messageBox">â‹†ï½¡Â°âœ© hold the cloud to start â‹†ï½¡Â°âœ©</div>

  <!-- HUG PERKS / COUPONS & ACHIEVEMENTS -->
  <div class="coupon-factory">
    <div class="hug-perk" id="createCouponBtn">
      <span>ğŸ«</span> generate hug coupon
    </div>
    <div class="hug-perk" id="showMilestoneBtn">
      <span>ğŸ…</span> hug milestone
    </div>
  </div>

  <!-- EXTRA CUDDLE TOOLS -->
  <div class="cuddle-tools">
    <div class="cuddle-btn" id="breathBuddyBtn">ğŸ§˜ breathe</div>
    <div class="cuddle-btn" id="comfortLetterBtn">ğŸ’Œ comfort letter</div>
    <div class="cuddle-btn" id="hugMemoryBtn">ğŸ“– hug memory</div>
  </div>

  <!-- COUPON/REWARD AREA (DYNAMIC) -->
  <div id="dynamicRewardArea" style="margin-top:18px;"></div>

</div>

<script>
  (function() {
    'use strict';
    // ----------------------------------------------------
    //  ğŸ«‚  HUG TIME Â· NO AUDIO Â· PURE HUG FEATURES  ğŸ«‚
    //  Total hug duration tracking, streaks, milestones,
    //  coupons, breathing, comfort letters, hug memory.
    // ----------------------------------------------------

    // ---- FLOATING HUG ASSETS (only hugs) ----
    function createFloatingHugs() {
      const container = document.getElementById('floatingHugsContainer');
      for (let i=0;i=28;i++) {
        let hug = document.createElement('div');
        hug.className = 'float-hug';
        hug.innerHTML = ['ğŸ«‚','ğŸ¤','ğŸ«‚','ğŸ§¸','ğŸ«‚','â˜ï¸','ğŸ«‚','âœ¨','ğŸ«‚'][Math.floor(Math.random()*9)];
        hug.style.left = Math.random()*100 + '%';
        hug.style.animationDelay = Math.random()*14 + 's';
        hug.style.fontSize = (Math.random()*30 + 22) + 'px';
        hug.style.animationDuration = (Math.random()*15 + 15) + 's';
        container.appendChild(hug);
      }
    }
    createFloatingHugs();

    // ---------- GLOBAL STATE ----------
    let mood = 'okay';
    let hugging = false;
    let hugStartTime = null;
    let totalHugSeconds = Number(localStorage.getItem('totalHugSeconds') || 0);
    let hugCount = Number(localStorage.getItem('hugCount') || 0);
    let streak = Number(localStorage.getItem('hugStreak') || 0);
    let lastHugDate = localStorage.getItem('lastHugDate') || '';
    
    // For current hug timer
    let currentInterval = null;
    let currentHugElapsed = 0;

    // DOM elements
    const hugBtn = document.getElementById('hugBtn');
    const messageBox = document.getElementById('messageBox');
    const moodBtns = document.querySelectorAll('#moodPanel .pill');
    const totalTimeDisplay = document.getElementById('totalHugTimeDisplay');
    const currentHugDisplay = document.getElementById('currentHugDuration');
    const hugCounterEl = document.getElementById('hugCounter');
    const streakNumberEl = document.getElementById('streakNumber');
    const weekDots = document.getElementById('weekDots');
    const milestoneValueEl = document.getElementById('milestoneValue');
    const milestoneLabelEl = document.getElementById('milestoneLabel');
    const createCouponBtn = document.getElementById('createCouponBtn');
    const showMilestoneBtn = document.getElementById('showMilestoneBtn');
    const breathBuddyBtn = document.getElementById('breathBuddyBtn');
    const comfortLetterBtn = document.getElementById('comfortLetterBtn');
    const hugMemoryBtn = document.getElementById('hugMemoryBtn');
    const dynamicArea = document.getElementById('dynamicRewardArea');

    // ----- MESSAGES BY MOOD (hug responses) -----
    const messages = {
      low: ['this hug holds all of you.', 'iâ€™m not letting go.', 'you can rest here forever.'],
      meh: ['a gentle hug for a quiet heart.', 'iâ€™m here, even in the stillness.'],
      okay: ['youâ€™re doing wonderfully.', 'warmth just for you.'],
      emotional: ['feel it all. iâ€™ll hold you.', 'your heart is safe with me.'],
      loved: ['you are so loved.', 'this hug celebrates you.'],
      anxious: ['breathe with meâ€¦ inâ€¦ outâ€¦', 'you are safe in this hug.'],
      cozy: ['wrapped in softness.', 'hug like a warm blanket.']
    };

    // ----- update total time display -----
    function updateTotalTimeDisplay() {
      let seconds = totalHugSeconds;
      let mins = Math.floor(seconds / 60);
      let secs = seconds % 60;
      totalTimeDisplay.textContent = `${mins}m ${secs}s`;
      // milestone: every 2 minutes = badge
      let totalMinutes = Math.floor(totalHugSeconds / 60);
      milestoneValueEl.textContent = totalMinutes;
      milestoneLabelEl.textContent = totalMinutes === 1 ? 'hug minute' : 'hug minutes';
    }

    // ----- increment total hug time (each tick)-----
    function addHugTime(seconds) {
      totalHugSeconds += seconds;
      localStorage.setItem('totalHugSeconds', totalHugSeconds);
      updateTotalTimeDisplay();
    }

    // ----- update hug counter and streak -----
    function updateHugCountAndStreak() {
      hugCounterEl.textContent = hugCount;
      streakNumberEl.textContent = streak;
    }

    // ----- streak & calendar logic -----
    function updateStreakCalendar() {
      const today = new Date().toDateString();
      if (lastHugDate !== today) {
        let yesterday = new Date();
        yesterday.setDate(yesterday.getDate() - 1);
        if (lastHugDate === yesterday.toDateString()) {
          streak++;
        } else {
          streak = 1;
        }
        lastHugDate = today;
        localStorage.setItem('lastHugDate', today);
        localStorage.setItem('hugStreak', streak);
      }
      streakNumberEl.textContent = streak;

      // 7-day calendar
      let dots = '';
      for (let i = 6; i >= 0; i--) {
        let d = new Date();
        d.setDate(d.getDate() - i);
        let dateStr = d.toDateString();
        let symbol = 'Â·';
        if (dateStr === today) symbol = 'ğŸ«‚';
        else if (localStorage.getItem('hughist_' + dateStr)) symbol = 'ğŸ¤';
        else symbol = 'â—‹';
        dots += `<span style="filter:drop-shadow(0 2px 6px pink);">${symbol}</span>`;
      }
      weekDots.innerHTML = dots;
    }

    // mark day as hugged
    function markHugDay() {
      const today = new Date().toDateString();
      localStorage.setItem('hughist_' + today, 'ğŸ¤');
      updateStreakCalendar();
    }

    // ----- HUG START -----
    function startHug(e) {
      if (hugging) return;
      hugging = true;
      hugStartTime = Date.now();
      hugBtn.classList.add('hug-glow');
      messageBox.classList.remove('show');

      // start current hug timer
      currentHugElapsed = 0;
      if (currentInterval) clearInterval(currentInterval);
      currentInterval = setInterval(() => {
        if (hugging) {
          let elapsed = (Date.now() - hugStartTime) / 1000;
          currentHugElapsed = elapsed;
          currentHugDisplay.textContent = elapsed.toFixed(1) + 's';
        }
      }, 100);
    }

    // ----- HUG END -----
    function endHug() {
      if (!hugging) return;
      hugging = false;
      hugBtn.classList.remove('hug-glow');
      
      if (currentInterval) {
        clearInterval(currentInterval);
        currentInterval = null;
      }

      // calculate hug duration
      if (hugStartTime) {
        let duration = (Date.now() - hugStartTime) / 1000;
        duration = Math.round(duration * 10) / 10; // deciseconds
        
        // add to total hug time
        addHugTime(duration);
        
        // increase hug count
        hugCount++;
        localStorage.setItem('hugCount', hugCount);
        hugCounterEl.textContent = hugCount;
        
        // mark streak / calendar
        markHugDay();

        // show message
        const moodMessages = messages[mood] || messages.okay;
        let msg = moodMessages[Math.floor(Math.random() * moodMessages.length)];
        messageBox.textContent = `ğŸ«‚ ${msg} (${duration}s hug)`;
        messageBox.classList.add('show');

        // reset current display
        currentHugDisplay.textContent = '0.0s';
        hugStartTime = null;
        currentHugElapsed = 0;
      }
    }

    // ----- attach hug events -----
    hugBtn.addEventListener('mousedown', startHug);
    hugBtn.addEventListener('touchstart', startHug);
    document.addEventListener('mouseup', endHug);
    document.addEventListener('touchend', endHug);
    window.addEventListener('blur', () => { if (hugging) endHug(); });

    // ----- MOOD SWITCHER -----
    moodBtns.forEach(btn => {
      btn.addEventListener('click', function() {
        moodBtns.forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        mood = this.dataset.mood;
      });
    });

    // ----- HUG COUPON GENERATOR -----
    createCouponBtn.addEventListener('click', function() {
      dynamicArea.innerHTML = `
        <div style="background:#fff0f5; border-radius:60px; padding:18px; border:4px dashed #ff849c; margin-top:5px; display:flex; align-items:center; justify-content:space-between;">
          <span style="font-weight:900; font-size:1.2rem;">ğŸŸï¸ ONE FREE HUG â€” redeem anytime</span>
          <button id="copyCouponBtn" style="background:white; border:4px solid #ffb6c1; border-radius:50px; padding:10px 22px; font-weight:800;">copy</button>
        </div>
      `;
      document.getElementById('copyCouponBtn')?.addEventListener('click', function() {
        navigator.clipboard?.writeText('ğŸ«‚âœ¨ good for 1 hug, any time. redeem with love.');
        alert('ğŸ’Œ hug coupon copied!');
      });
    });

    // ----- MILESTONE CELEBRATION -----
    showMilestoneBtn.addEventListener('click', function() {
      let mins = Math.floor(totalHugSeconds / 60);
      dynamicArea.innerHTML = `
        <div style="background:#ffe2eb; border-radius:70px; padding:18px; border:5px solid white; animation:pulse 1s;">
          ğŸ† <span style="font-weight:900;">you've hugged for ${mins} minutes!</span> ğŸ†
        </div>
      `;
    });

    // ----- BREATHING BUDDY (no audio)-----
    breathBuddyBtn.addEventListener('click', function() {
      let breathPhase = 'inhale...';
      let count = 0;
      dynamicArea.innerHTML = `
        <div style="background:#ffdde8; border-radius:90px; padding:22px; border:5px solid white; text-align:center;">
          <div style="font-size:2.5rem; margin-bottom:8px;" id="breathIcon">ğŸ«</div>
          <div style="font-size:1.6rem; font-weight:900;" id="breathInstruction">inhale... 3s</div>
        </div>
      `;
      let instr = document.getElementById('breathInstruction');
      let icon = document.getElementById('breathIcon');
      let seconds = 0;
      let breathInterval = setInterval(() => {
        seconds++;
        if (seconds % 6 < 3) {
          instr.textContent = 'inhale... 3s';
          icon.textContent = 'â¬†ï¸ğŸ«';
        } else {
          instr.textContent = 'exhale... 3s';
          icon.textContent = 'â¬‡ï¸ğŸƒ';
        }
        if (seconds > 30) clearInterval(breathInterval);
      }, 1000);
    });

    // ----- COMFORT LETTER (random tender message)-----
    comfortLetterBtn.addEventListener('click', function() {
      let letters = [
        'you are allowed to take up space.',
        'someone out there is thinking of you warmly.',
        'this hug is proof that you are cherished.',
        'your heart is gentle and strong.',
        'you donâ€™t have to earn rest.'
      ];
      let rand = letters[Math.floor(Math.random() * letters.length)];
      dynamicArea.innerHTML = `
        <div style="background:#fff6f0; border-radius:80px 20px 80px 20px; padding:22px; border:4px solid #ffb6b6;">
          âœ‰ï¸ ğŸ’Œ <span style="font-weight:900; font-size:1.2rem;">${rand}</span>
        </div>
      `;
    });

    // ----- HUG MEMORY: last 3 hugs time + messages -----
    hugMemoryBtn.addEventListener('click', function() {
      let lastHugs = JSON.parse(localStorage.getItem('recentHugs') || '[]');
      if (lastHugs.length === 0) lastHugs = ['ğŸ«‚ first hug', 'ğŸ«‚ second', 'ğŸ«‚ another'];
      let html = '<div style="background:#ffeaf0; border-radius:50px; padding:18px; border:4px solid white;">ğŸ“– recent hugs:<br>';
      lastHugs.slice(-3).forEach(h => html += 'ğŸ«‚ ' + h + '<br>');
      html += '</div>';
      dynamicArea.innerHTML = html;
    });

    // ----- save recent hug in memory -----
    function pushHugMemory(durationMsg) {
      let recent = JSON.parse(localStorage.getItem('recentHugs') || '[]');
      recent.push(durationMsg);
      if (recent.length > 5) recent.shift();
      localStorage.setItem('recentHugs', JSON.stringify(recent));
    }

    // override endHug to store memory
    const originalEndHug = endHug;
    window.endHug = function() {
      if (hugging && hugStartTime) {
        let dur = ((Date.now() - hugStartTime) / 1000).toFixed(1);
        pushHugMemory(`${dur}s hug Â· ${mood}`);
      }
      originalEndHug.call(this);
    };
    endHug.prototype = originalEndHug;

    // ----- init UI -----
    function init() {
      updateTotalTimeDisplay();
      hugCounterEl.textContent = hugCount;
      streakNumberEl.textContent = streak;
      updateStreakCalendar();
    }
    init();

    // message start
    setTimeout(() => {
      if (!messageBox.classList.contains('show')) {
        messageBox.textContent = 'ğŸ«‚ press & hold for hugs';
        messageBox.classList.add('show');
      }
    }, 200);
  })();
</script>

</body>
</html>
