<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5" />
  <title>ğŸ«‚ Hug Cloud Â· infinite warmth</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at 10% 30%, #ffe6f0, #ffdae8, #ffe0ea, #fff4ea);
      font-family: 'Quicksand', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #3e2b36;
      position: relative;
      overflow-x: hidden;
      animation: bgWaves 14s infinite alternate;
      padding: 20px 10px;
    }

    @keyframes bgWaves {
      0% { background: radial-gradient(circle at 10% 30%, #ffe9f2, #ffdeec, #ffe2ed, #fff5ea); }
      50% { background: radial-gradient(circle at 70% 80%, #fff0f5, #ffe3ef, #ffdae9, #ffe8df); }
      100% { background: radial-gradient(circle at 30% 70%, #ffecf5, #ffd7e6, #ffe6ed, #fff1e5); }
    }

    /* floating kisses */
    .float-kiss {
      position: fixed;
      pointer-events: none;
      color: #ffa5b9;
      font-size: 1.8rem;
      opacity: 0.45;
      animation: kissFloat 16s infinite linear;
      z-index: 1;
      text-shadow: 0 0 12px #ffe2e2;
    }

    @keyframes kissFloat {
      0% { transform: translateY(120vh) rotate(0deg) scale(0.6); opacity: 0.2; }
      50% { opacity: 0.7; transform: translateY(40vh) rotate(180deg) scale(1.2); }
      100% { transform: translateY(-20vh) rotate(360deg) scale(0.4); opacity: 0; }
    }

    .glass-panel {
      position: relative;
      z-index: 20;
      max-width: 560px;
      width: 100%;
      background: rgba(255, 250, 245, 0.58);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 80px 80px 80px 80px;
      padding: 30px 28px;
      box-shadow: 0 25px 50px rgba(250, 140, 170, 0.25),
                  inset 0 5px 12px rgba(255, 255, 255, 0.9),
                  inset 0 -6px 12px rgba(255, 200, 200, 0.4);
      border: 3px solid rgba(255, 255, 255, 0.7);
      transition: all 0.3s;
      animation: panelGlow 6s infinite alternate;
    }

    @keyframes panelGlow {
      0% { box-shadow: 0 25px 50px rgba(250, 140, 170, 0.2), inset 0 5px 12px white; }
      100% { box-shadow: 0 35px 70px rgba(255, 120, 160, 0.4), inset 0 8px 18px rgba(255, 255, 255, 0.95); }
    }

    h1 {
      font-size: 2.9rem;
      font-weight: 800;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      letter-spacing: 3px;
      color: #56333e;
      text-shadow: 0 6px 0 #ffc2ce, 0 12px 20px rgba(255, 130, 150, 0.3);
      animation: hugTitle 2.2s infinite alternate;
    }

    @keyframes hugTitle {
      0% { transform: scale(1) translateY(0); }
      100% { transform: scale(1.04) translateY(-6px); text-shadow: 0 8px 0 #ffb3c1, 0 18px 30px #ff95a8; }
    }

    .subhead {
      background: #ffe9f0cc;
      padding: 14px 20px;
      border-radius: 100px;
      border: 2px dashed #ff8da1;
      margin: 18px 0 18px;
      font-weight: 700;
      font-size: 1.05rem;
      color: #4f3340;
      backdrop-filter: blur(4px);
      animation: subPulse 3s infinite;
    }

    @keyframes subPulse {
      0% { border-color: #ff8da1; background: #ffe9f0cc; }
      50% { border-color: #ffb8c9; background: #ffeef4cc; }
    }

    /* mood + extra comfort toggles */
    .mood-section {
      background: rgba(255, 235, 245, 0.7);
      border-radius: 70px 70px 40px 40px;
      padding: 18px 12px;
      margin-bottom: 18px;
      border: 2px solid #ffffffd0;
    }

    .button-panel {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
      margin-top: 8px;
    }

    .pill {
      background: rgba(255, 255, 255, 0.8);
      border: 2px solid white;
      padding: 10px 20px;
      border-radius: 50px;
      font-weight: 700;
      color: #4b2e39;
      box-shadow: 0 6px 0 #e7a1ab;
      transition: 0.15s cubic-bezier(0.34, 1.56, 0.64, 1);
      cursor: pointer;
      backdrop-filter: blur(2px);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .pill:hover {
      transform: scale(1.08) translateY(-5px);
      box-shadow: 0 11px 0 #da8c98;
      background: #fff5f7;
    }

    .pill.active {
      background: #ffdee8;
      border: 3px solid #ff6f8a;
      box-shadow: 0 7px 0 #ff5f7c;
    }

    /* hug button â€” now with extra cuddle */
    .hug-throne {
      position: relative;
      margin: 25px 0 20px;
    }

    .hug-button {
      width: 200px;
      height: 200px;
      border-radius: 60% 40% 50% 50% / 45% 55% 45% 55%;
      background: radial-gradient(circle at 35% 25%, #ffccd5, #ffb3c1, #ffa5b7);
      border: 5px solid white;
      box-shadow: 0 18px 0 #b07782, 0 30px 45px rgba(255, 100, 130, 0.5), inset 0 -12px 15px rgba(0,0,0,0.04), inset 0 12px 25px rgba(255,255,255,0.8);
      font-size: 1.45rem;
      font-weight: 800;
      color: #402630;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 0 auto;
      cursor: pointer;
      transition: 0.06s;
      animation: hugMorph 4s infinite alternate, cloudLevitate 3.5s infinite;
      line-height: 1.4;
      padding: 0 12px;
    }

    @keyframes hugMorph {
      0% { border-radius: 60% 40% 50% 50% / 45% 55% 45% 55%; }
      25% { border-radius: 50% 50% 40% 60% / 60% 40% 60% 40%; }
      50% { border-radius: 45% 55% 55% 45% / 50% 60% 40% 50%; }
      100% { border-radius: 55% 45% 50% 50% / 50% 50% 50% 50%; }
    }

    @keyframes cloudLevitate {
      0% { transform: translateY(0) scale(1); }
      100% { transform: translateY(-15px) scale(1.02); }
    }

    .hug-glow {
      animation: hugTsunami 1.1s infinite !important;
      box-shadow: 0 0 0 20px rgba(255, 170, 190, 0.5), 0 0 0 40px rgba(255, 190, 200, 0.2), 0 18px 0 #b07782 !important;
    }

    @keyframes hugTsunami {
      0% { box-shadow: 0 0 0 0 rgba(255, 170, 200, 0.6), 0 0 0 0 rgba(255, 150, 170, 0.3), 0 18px 0 #b07782; }
      70% { box-shadow: 0 0 0 30px rgba(255, 200, 210, 0.1), 0 0 0 60px rgba(255, 180, 190, 0.05), 0 18px 0 #b07782; }
    }

    .comfort-strip {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 14px;
      margin: 28px 0 12px;
    }

    .comfort-item {
      background: #ffeef2f0;
      backdrop-filter: blur(4px);
      padding: 12px 16px;
      border-radius: 40px;
      border: 3px solid white;
      font-size: 0.9rem;
      font-weight: 700;
      box-shadow: 0 5px 0 #d6a0a8;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      transition: 0.2s;
      cursor: pointer;
      min-width: 110px;
    }

    .comfort-item:hover {
      transform: scale(1.05) translateY(-6px);
      box-shadow: 0 11px 0 #c2848f;
      background: #fff2f6;
    }

    .comfort-icon {
      font-size: 1.7rem;
    }

    /* hug calendar / streak */
    .streak-haven {
      background: rgba(255, 240, 245, 0.7);
      padding: 16px 18px;
      border-radius: 60px 20px 60px 20px;
      margin: 15px 0 10px;
      border: 3px solid #ffe2ec;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .streak-box {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .streak-fire {
      font-size: 2rem;
      filter: drop-shadow(0 6px 2px rgba(255, 100, 0, 0.3));
      animation: fireFlick 1s infinite alternate;
    }

    @keyframes fireFlick {
      0% { transform: scale(1); }
      100% { transform: scale(1.15); text-shadow: 0 0 15px orange; }
    }

    .calendar-dots {
      display: flex;
      gap: 10px;
      font-size: 1.7rem;
    }

    /* breathing buddy */
    .breathe-ball {
      width: 50px;
      height: 50px;
      background: radial-gradient(circle, #ffa5bc, #ff7e9f);
      border-radius: 50%;
      display: inline-block;
      transition: 0.1s;
      box-shadow: 0 0 10px #ff99aa;
    }

    /* message area â€“ extra fluffy */
    .message-bay {
      background: #fff4f9;
      border-radius: 60px 60px 60px 20px;
      padding: 18px 24px;
      margin: 20px 0 10px;
      border: 4px solid white;
      box-shadow: 0 10px 0 #e7a1ab, inset 0 2px 10px white;
      font-size: 1.2rem;
      font-weight: 700;
      color: #3f2a32;
      min-height: 95px;
      word-break: break-word;
      opacity: 0;
      transform: scale(0.85);
      transition: opacity 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .message-bay.show {
      opacity: 1;
      transform: scale(1);
    }

    .counter-wrap {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 16px;
      background: #ffdce6;
      border-radius: 80px;
      padding: 8px 18px 8px 12px;
      border: 3px solid white;
    }

    /* share coupon */
    .coupon {
      background: #fff3e0;
      border: 3px dashed #ff889f;
      border-radius: 30px;
      padding: 12px 10px;
      margin-top: 16px;
      font-size: 0.95rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .coupon button {
      background: white;
      border: 2px solid #ffb6c1;
      padding: 8px 16px;
      border-radius: 40px;
      font-weight: 700;
      color: #572c36;
      box-shadow: 0 4px 0 #c4929b;
      transition: 0.1s;
    }

    .coupon button:active {
      transform: translateY(6px);
      box-shadow: 0 1px 0 #c4929b;
    }

    .mute-toggle {
      position: fixed;
      bottom: 22px;
      right: 22px;
      background: #ffeef2f0;
      backdrop-filter: blur(20px);
      padding: 14px 20px;
      border-radius: 50px;
      font-weight: 800;
      border: 3px solid white;
      box-shadow: 0 7px 0 #b2808a;
      z-index: 99;
      cursor: pointer;
    }

    /* ambient sound selector */
    .ambient-panel {
      margin-top: 20px;
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .ambient-pill {
      background: rgba(255, 255, 255, 0.7);
      border-radius: 40px;
      padding: 8px 18px;
      font-size: 0.8rem;
      font-weight: 700;
      border: 2px solid white;
      box-shadow: 0 4px 0 #cf9fa8;
    }
  </style>
</head>
<body>

<div id="kissContainer"></div>
<div class="glass-panel">

  <h1>ğŸ«‚  hug day  ğ“†·ğ“†·</h1>
  <div class="subhead">ğŸ’­  hold the cloud. feel everything.  ğŸ’­</div>

  <!-- MOODS â€” now with extra sparkle -->
  <div class="mood-section">
    <div style="font-weight:800; margin-bottom:10px;">pick your heart color ğŸ¨</div>
    <div class="button-panel" id="moodPanel">
      <button data-mood="low" class="pill">ğŸŒ§ï¸ low</button>
      <button data-mood="meh" class="pill">ğŸƒ meh</button>
      <button data-mood="okay" class="pill active">â˜ï¸ okay</button>
      <button data-mood="emotional" class="pill">ğŸŒŠ emotional</button>
      <button data-mood="loved" class="pill">ğŸ’˜ loved</button>
      <button data-mood="anxious" class="pill">ğŸŒ€ anxious</button>
      <button data-mood="hopeful" class="pill">âœ¨ hopeful</button>
    </div>
  </div>

  <!-- HUG THRONE ğŸ«‚ -->
  <div class="hug-throne">
    <button class="hug-button" id="hugBtn">
      <span style="font-size:1.9rem;">ğŸ«‚</span> hold here
    </button>
  </div>

  <!-- MESSAGE appears here âœ¨ -->
  <div class="message-bay" id="messageBox">â‹†ï½¡Â°âœ© press & hold â‹†ï½¡Â°âœ©</div>

  <!-- COMFORT ZONE: breathing, hug coupon, ambient -->
  <div class="comfort-strip">
    <div class="comfort-item" id="breathingBuddy">
      <span class="comfort-icon" id="breathIcon">ğŸ«</span>
      <span id="breathText">breathe with me</span>
    </div>
    <div class="comfort-item" id="giftCouponBtn">
      <span class="comfort-icon">ğŸŸï¸</span>
      <span>hug coupon</span>
    </div>
    <div class="comfort-item" id="ambientToggle">
      <span class="comfort-icon" id="ambientIcon">ğŸŒ™</span>
      <span>rain sounds</span>
    </div>
  </div>

  <!-- STREAK / HUG CALENDAR -->
  <div class="streak-haven">
    <div class="streak-box">
      <span class="streak-fire">ğŸ”¥</span>
      <div style="font-weight:800;"><span id="streakCount">0</span>-day streak</div>
    </div>
    <div class="calendar-dots" id="weekDots">
      <!-- js populated -->
    </div>
  </div>

  <!-- HUG COUNTER + RESET? no reset, only love -->
  <div class="counter-wrap">
    <span style="font-weight:800; font-size:1.2rem;">ğŸ«‚ total hugs</span>
    <span style="background:white; padding:8px 24px; border-radius:60px; font-weight:900; font-size:1.6rem; color:#9f4a5a; border:3px solid #ffb6c1;" id="hugCounter">0</span>
  </div>

  <!-- HUG COUPON (hidden then show) -->
  <div id="couponArea" style="margin-top: 12px;"></div>

  <!-- ambient sound selector -->
  <div class="ambient-panel" id="ambientSelector" style="display: none;">
    <span class="ambient-pill" data-sound="rain">ğŸŒ§ï¸ rain</span>
    <span class="ambient-pill" data-sound="waves">ğŸŒŠ waves</span>
    <span class="ambient-pill" data-sound="night">ğŸ¦‰ night</span>
    <span class="ambient-pill" data-sound="off">ğŸ”‡ off</span>
  </div>
</div>

<!-- MUTE (global) -->
<div class="mute-toggle" id="muteToggle">ğŸ”Š sound on</div>

<!-- AUDIOS: hug + ambient -->
<audio id="hugSound" preload="auto" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_18b1f4e7e4.mp3?filename=soft-whoosh-11808.mp3"></audio>
<audio id="ambientRain" loop preload="auto" src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_11f5f429b0.mp3?filename=soft-rain-ambient-111154.mp3"></audio>
<audio id="ambientWaves" loop preload="auto" src="https://cdn.pixabay.com/download/audio/2021/11/25/audio_a3c1a36f8d.mp3?filename=ocean-waves-112906.mp3"></audio>
<audio id="ambientNight" loop preload="auto" src="https://cdn.pixabay.com/download/audio/2022/01/18/audio_d0c1ff8d6d.mp3?filename=night-forest-ambient-15297.mp3"></audio>

<script>
  (function() {
    'use strict';
    // --------------------------------------
    //  âœ¦â€§âº HUG ENGINE â€” EXTRA FEATURE RUSH âºâ€§âœ¦
    // --------------------------------------

    // infinite floating kisses (more!)
    function createKisses() {
      const container = document.getElementById('kissContainer');
      for (let i=0;i<34;i++) {
        let kiss = document.createElement('div');
        kiss.className = 'float-kiss';
        kiss.innerHTML = ['ğŸ«‚','ğŸ¤','ğŸ©·','ğŸ’—','ğŸ’“','ğŸŒ¸','âœ¨','ğŸ•Šï¸','â˜ï¸','ğŸ§¸'][Math.floor(Math.random()*10)];
        kiss.style.left = Math.random()*100 + '%';
        kiss.style.animationDelay = Math.random()*14 + 's';
        kiss.style.fontSize = (Math.random()*24 + 20) + 'px';
        kiss.style.animationDuration = (Math.random()*12 + 12) + 's';
        container.appendChild(kiss);
      }
    }
    createKisses();

    // state variables â€” lots of them!
    let mood = 'okay';
    let hugging = false;
    let muted = false;
    let ambientOn = false;
    let currentAmbient = null;
    let hugCount = Number(localStorage.getItem('hugCount') || 0);
    let streak = Number(localStorage.getItem('hugStreak') || 0);
    let lastHugDate = localStorage.getItem('lastHugDate') || '';
    let breatheActive = false;
    let breathInterval;

    // DOM elements
    const hugBtn = document.getElementById('hugBtn');
    const messageBox = document.getElementById('messageBox');
    const hugSound = document.getElementById('hugSound');
    const muteToggle = document.getElementById('muteToggle');
    const moodBtns = document.querySelectorAll('#moodPanel .pill');
    const counterEl = document.getElementById('hugCounter');
    const streakEl = document.getElementById('streakCount');
    const weekDots = document.getElementById('weekDots');
    const breathBuddy = document.getElementById('breathingBuddy');
    const breathText = document.getElementById('breathText');
    const breathIcon = document.getElementById('breathIcon');
    const couponBtn = document.getElementById('giftCouponBtn');
    const couponArea = document.getElementById('couponArea');
    const ambientToggle = document.getElementById('ambientToggle');
    const ambientIcon = document.getElementById('ambientIcon');
    const ambientSelector = document.getElementById('ambientSelector');
    const ambientPills = document.querySelectorAll('.ambient-pill');
    const ambientRain = document.getElementById('ambientRain');
    const ambientWaves = document.getElementById('ambientWaves');
    const ambientNight = document.getElementById('ambientNight');

    // HUGE message pool per mood
    const messages = {
      low: ['you can rest your bones here.', 'this hug absorbs the heaviness.', 'iâ€™ll carry it with you.', 'youâ€™re not alone, never.'],
      meh: ['quiet hug for a quiet heart.', 'iâ€™m here even in the silence.', 'you donâ€™t need to perform.'],
      okay: ['proud of you, always.', 'youâ€™re doing better than you think.', 'warm hug, just because.'],
      emotional: ['let it flow. iâ€™m not leaving.', 'your tears are safe here.', 'feel it all, iâ€™ll hold you.'],
      loved: ['you are SO cherished.', 'this hug glows because of you.', 'your heart is a treasure.'],
      anxious: ['breathe with me. inâ€¦ outâ€¦', 'you are safe right now.', 'iâ€™ve got you, sweetheart.'],
      hopeful: ['light is finding you.', 'something beautiful is coming.', 'hope is hugging you tightly.']
    };

    // ----- update streak & calendar -----
    function updateStreakAndCalendar() {
      const today = new Date().toDateString();
      if (lastHugDate !== today) {
        let yesterday = new Date();
        yesterday.setDate(yesterday.getDate() - 1);
        const yestStr = yesterday.toDateString();
        if (lastHugDate === yestStr) {
          streak++;
        } else {
          streak = 1;
        }
        lastHugDate = today;
        localStorage.setItem('lastHugDate', today);
        localStorage.setItem('hugStreak', streak);
      }
      streakEl.textContent = streak;

      // draw 7-day cute calendar
      let dotsHtml = '';
      for (let i = 6; i >= 0; i--) {
        let d = new Date();
        d.setDate(d.getDate() - i);
        let dateStr = d.toDateString();
        let isHugged = (dateStr === lastHugDate) ? 'ğŸ«¶' : 'â—‹';
        if (dateStr === lastHugDate) isHugged = 'ğŸ«‚';
        else if (localStorage.getItem('hug_' + dateStr)) isHugged = 'ğŸ¤'; 
        else isHugged = 'Â·';
        dotsHtml += `<span style="filter: drop-shadow(0 2px 5px pink);">${isHugged}</span>`;
      }
      weekDots.innerHTML = dotsHtml;
    }
    updateStreakAndCalendar();

    // save hug day mark
    function markHugDay() {
      const today = new Date().toDateString();
      localStorage.setItem('hug_' + today, 'ğŸ¤');
      updateStreakAndCalendar();
    }

    // ----- HUG counter -----
    function updateHugCounter() {
      counterEl.textContent = hugCount;
      localStorage.setItem('hugCount', hugCount);
    }
    updateHugCounter();

    // ----- mood switcher -----
    moodBtns.forEach(btn => {
      btn.addEventListener('click', function() {
        moodBtns.forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        mood = this.dataset.mood;
      });
    });

    // ----- HUG start / end -----
    function startHug(e) {
      if (hugging) return;
      hugging = true;
      hugBtn.classList.add('hug-glow');
      messageBox.classList.remove('show');

      if (!muted) {
        hugSound.currentTime = 0;
        hugSound.play().catch(() => {});
      }
      if (navigator.vibrate) navigator.vibrate(30);
    }

    function endHug() {
      if (!hugging) return;
      hugging = false;
      hugBtn.classList.remove('hug-glow');

      hugCount++;
      localStorage.setItem('hugCount', hugCount);
      updateHugCounter();
      markHugDay(); // updates streak + calendar

      const moodMessages = messages[mood] || messages.okay;
      const msg = moodMessages[Math.floor(Math.random() * moodMessages.length)];
      messageBox.textContent = 'ğŸ«‚ ' + msg;
      messageBox.classList.add('show');
    }

    hugBtn.addEventListener('mousedown', startHug);
    hugBtn.addEventListener('touchstart', startHug);
    document.addEventListener('mouseup', endHug);
    document.addEventListener('touchend', endHug);
    window.addEventListener('blur', () => { if (hugging) endHug(); });

    // mute toggle
    muteToggle.onclick = () => {
      muted = !muted;
      muteToggle.textContent = muted ? 'ğŸ”‡ sound off' : 'ğŸ”Š sound on';
      if (!muted && currentAmbient) {
        let snd = getAmbientSound(currentAmbient);
        if (snd) snd.play().catch(() => {});
      }
    };

    // ---------- BREATHING EXERCISE ----------
    breathBuddy.addEventListener('click', function() {
      if (breatheActive) {
        clearInterval(breathInterval);
        breatheActive = false;
        breathText.textContent = 'breathe with me';
        breathIcon.textContent = 'ğŸ«';
        return;
      }
      breatheActive = true;
      breathText.textContent = 'breathe in...';
      breathIcon.textContent = 'â¬†ï¸ğŸ’¨';
      let count = 0;
      breathInterval = setInterval(() => {
        count++;
        if (count % 2 === 1) {
          breathText.textContent = 'breathe in...  ğŸ«â¬†ï¸';
          breathIcon.textContent = 'ğŸ«âœ¨';
        } else {
          breathText.textContent = 'breathe out...  ğŸ«â¬‡ï¸';
          breathIcon.textContent = 'ğŸƒğŸ’¨';
        }
        if (count === 10) count = 0;
      }, 3000);
    });

    // ---------- HUG COUPON generator ----------
    function createCoupon() {
      couponArea.innerHTML = `
        <div class="coupon" style="animation: fadeIn 0.6s;">
          <span style="display:flex; gap:6px;">ğŸ« ONE FREE HUG â€” redeem anytime ğŸ¤</span>
          <button id="shareCoupon">share ğŸ</button>
        </div>
      `;
      document.getElementById('shareCoupon')?.addEventListener('click', function() {
        alert('ğŸ’Œ you shared a hug coupon! (copy this: "ğŸ«‚âœ¨ good for 1 hug, any time.")');
        navigator.clipboard?.writeText('ğŸ«‚âœ¨ good for 1 hug, any time. redeem with love.');
      });
    }

    couponBtn.addEventListener('click', createCoupon);

    // ---------- AMBIENT SOUND ----------
    function getAmbientSound(type) {
      if (type === 'rain') return ambientRain;
      if (type === 'waves') return ambientWaves;
      if (type === 'night') return ambientNight;
      return null;
    }

    ambientToggle.addEventListener('click', function() {
      if (ambientSelector.style.display === 'none' || ambientSelector.style.display === '') {
        ambientSelector.style.display = 'flex';
      } else {
        ambientSelector.style.display = 'none';
      }
    });

    ambientPills.forEach(pill => {
      pill.addEventListener('click', function() {
        let type = this.dataset.sound;
        if (type === 'off') {
          if (currentAmbient) {
            let snd = getAmbientSound(currentAmbient);
            if (snd) { snd.pause(); snd.currentTime = 0; }
            currentAmbient = null;
            ambientIcon.textContent = 'ğŸŒ™';
          }
          ambientSelector.style.display = 'none';
          return;
        }
        // stop previous ambient
        if (currentAmbient) {
          let old = getAmbientSound(currentAmbient);
          if (old) { old.pause(); old.currentTime = 0; }
        }
        currentAmbient = type;
        let newSnd = getAmbientSound(type);
        if (newSnd) {
          newSnd.loop = true;
          if (!muted) newSnd.play().catch(() => {});
          ambientIcon.textContent = type === 'rain' ? 'ğŸŒ§ï¸' : (type === 'waves' ? 'ğŸŒŠ' : 'ğŸ¦‰');
        }
        ambientSelector.style.display = 'none';
      });
    });

    // initial message
    setTimeout(() => {
      if (!messageBox.classList.contains('show')) {
        messageBox.textContent = 'â‹†ï½¡Â°âœ© hold the cloud â‹†ï½¡Â°âœ©';
        messageBox.classList.add('show');
      }
    }, 200);
  })();
</script>

</body>
</html>
